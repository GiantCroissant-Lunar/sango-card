{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://giantcroissant.io/schemas/sango-card/preparation-config.json",
  "title": "Build Preparation Config (Phase 1)",
  "description": "Configuration for Phase 1: Extract packages and assemblies from code-quality project to cache",
  "type": "object",
  "required": ["version", "id", "title", "packages", "assemblies"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Config schema version",
      "pattern": "^\\d+\\.\\d+$",
      "examples": ["1.0"]
    },
    "id": {
      "type": "string",
      "description": "Unique identifier for this config",
      "examples": ["third-party-packages"]
    },
    "title": {
      "type": "string",
      "description": "Human-readable title",
      "examples": ["Third-Party Unity Packages"]
    },
    "description": {
      "type": "string",
      "description": "Optional description of what this config does"
    },
    "packages": {
      "type": "array",
      "description": "Unity packages to extract from code-quality and cache",
      "items": {
        "type": "object",
        "required": ["name", "version", "source", "target"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Package name (e.g., com.cysharp.unitask)",
            "pattern": "^[a-z0-9.-]+$"
          },
          "version": {
            "type": "string",
            "description": "Package version",
            "pattern": "^\\d+\\.\\d+\\.\\d+.*$"
          },
          "source": {
            "type": "string",
            "description": "Source path relative to repository root (e.g., projects/code-quality/Library/PackageCache/...)"
          },
          "target": {
            "type": "string",
            "description": "Target cache path relative to repository root (e.g., build/preparation/cache/...)"
          }
        },
        "additionalProperties": false
      }
    },
    "assemblies": {
      "type": "array",
      "description": "NuGet assemblies to extract from code-quality and cache",
      "items": {
        "type": "object",
        "required": ["name", "version", "source", "target"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Assembly name (e.g., MessagePack)"
          },
          "version": {
            "type": "string",
            "description": "Assembly version",
            "pattern": "^\\d+\\.\\d+\\.\\d+.*$"
          },
          "source": {
            "type": "string",
            "description": "Source path relative to repository root (e.g., projects/code-quality/Assets/Packages/...)"
          },
          "target": {
            "type": "string",
            "description": "Target cache path relative to repository root (e.g., build/preparation/cache/...)"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
