{
  "$schema": "../../nuke/build/Schemas/multi-stage-preparation.schema.json",
  "version": "2.0",
  "description": "Multi-stage injection configuration for Unity client build - populates cache from preparation.json, then injects build package and removes duplicate formatters",
  "cacheSource": "build/configs/preparation/preparation.json",
  "injectionStages": [
    {
      "name": "preBuild",
      "enabled": true,
      "description": "Inject build tools and fix duplicate MessagePack formatters before Unity build",
      "cleanupAfter": false,
      "packages": [
        {
          "name": "com.contractwork.sangocard.build",
          "version": "0.1.0",
          "source": "build/preparation/cache/com.contractwork.sangocard.build",
          "target": "projects/client/Packages/com.contractwork.sangocard.build"
        }
      ],
      "assetManipulations": [
        {
          "type": "delete",
          "target": "projects/client/Assets/Scripts/MessagePackGenerated/MessagePack_Formatters_Quest_Component_QuestComponentFormatter.cs",
          "description": "Remove duplicate formatter for QuestDataComponent (conflicts with QuestDataComponentFormatter)"
        },
        {
          "type": "delete",
          "target": "projects/client/Assets/Scripts/MessagePackGenerated/MessagePack_Formatters_Quest_Component_QuestComponentFormatter.cs.meta"
        },
        {
          "type": "delete",
          "target": "projects/client/Assets/Scripts/MessagePackGenerated/MessagePack_Formatters_Shop_Component_ShopItemDataComponentFormatter.cs",
          "description": "Remove duplicate formatter for ProductDataComponent (conflicts with ProductDataComponentFormatter)"
        },
        {
          "type": "delete",
          "target": "projects/client/Assets/Scripts/MessagePackGenerated/MessagePack_Formatters_Shop_Component_ShopItemDataComponentFormatter.cs.meta"
        }
      ]
    }
  ]
}
