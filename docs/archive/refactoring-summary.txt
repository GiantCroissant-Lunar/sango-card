# ‚úÖ Configuration Separation Summary

## Completed Refactoring

Successfully separated preparation (cache population) and injection (build operations) concerns.

## File Structure

### Config Files (build/configs/preparation/)
- ‚úÖ preparation.json - Cache population sources (v1.0 - ACTIVE)
- ‚úÖ multi-stage-injection.json - Injection stages with operations (v2.0 - CURRENT)
- ‚ö†Ô∏è injection.json - Legacy single-stage (v1.0 - DEPRECATED)

### Schema Files (build/nuke/build/Schemas/)
- ‚úÖ preparation.schema.json - Cache population schema
- ‚úÖ multi-stage-injection.schema.json - Multi-stage injection schema
- ‚ö†Ô∏è injection.schema.json - Legacy injection schema (DEPRECATED)

## Clear Separation

### üì¶ preparation.json (Cache Population)
**Purpose:** Define sources for cache population ONLY
**Workflow:** code-quality ‚Üí cache
**Contains:**
    - Package sources with hash
    - Assembly sources
**Does NOT contain:**
    - Injection targets
    - Asset manipulations
    - Code patches
    - Scripting define symbols

### üöÄ multi-stage-injection.json (Injection + Operations)
**Purpose:** Define injection stages WITH full build operations
**Workflow:** cache ‚Üí client + operations
**Contains:**
    - Package/assembly injection targets
    - Asset manipulations (delete/copy/move)
    - Code patches (search/replace)
    - Scripting define symbols
    - Platform-specific configurations
**References:** preparation.json via cacheSource

## Migration Commands

Old (DEPRECATED):
    nuke BuildWithMultiStage --MultiStageConfig build/configs/preparation/multi-stage-preparation.json

New (CURRENT):
    nuke BuildWithMultiStage --MultiStageConfig build/configs/preparation/multi-stage-injection.json

## Commits
- 906ec5c: Separate preparation and injection configs
- a187afd: Fix messagepipe hash + remove duplicate .nuke
- 598b843: Simplify assetManipulations
- 9b66c73: Add complete packages/assemblies
- 1d12309: Move schema to centralized location
